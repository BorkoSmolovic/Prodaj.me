{"remainingRequest":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/src/components/AddAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/src/components/AddAd.vue","mtime":1633354101324},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBkaWFsb2c6IG51bGwsCiAgICBjYXRlZ29yaWVzOiBudWxsLAogICAgY2l0aWVzOiBudWxsLAogICAgdHlwZXM6IG51bGwsCiAgfSwKICBuYW1lOiAiQWRkQWQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgaW1hZ2VzOiBbXSwKICAgICAgdmFsaWRBZGQ6ICIiLAogICAgICBuYW1lOiAiIiwKICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICBjaXR5SWQ6ICIiLAogICAgICB0eXBlSWQ6ICIiLAogICAgICBjYXRlZ29yeUlkOiAiIiwKICAgICAgcHJpY2U6ICIiLAogICAgICBydWxlczogewogICAgICAgIHJlcXVpcmVkOiBbKHYpID0+ICEhdiB8fCAiT2JhdmV6bm8gcG9samUiXSwKICAgICAgICBwcmljZTogWwogICAgICAgICAgKHYpID0+ICEhdiB8fCAiT2JhdmV6bm8gcG9samUiLAogICAgICAgICAgKHYpID0+IHBhcnNlRmxvYXQodikgPiAwIHx8ICJDaWplbmEgbW9yYSBiaXRpIHBveml0aXZhbiBicm9qIiwKICAgICAgICBdLAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZURpYWxvZyIpOwogICAgICB0aGlzLiRyZWZzLmFkZEZvcm0ucmVzZXQoKTsKICAgIH0sCiAgICBjaGVjaygpIHsKICAgICAgY29uc29sZS5sb2coIkRPT1JSUlJSIiwgdGhpcy5pbWFnZXMpOwogICAgfSwKICAgIGFzeW5jIGFkZEFkKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBpZiAoIXRoaXMuJHJlZnMuYWRkRm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgY2F0ZWdvcnlJZDogdGhpcy5jYXRlZ29yeUlkLAogICAgICAgIGNpdHlJZDogdGhpcy5jaXR5SWQsCiAgICAgICAgb3duZXJJZDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKS5pZCwKICAgICAgICBzdGF0dXNJZDogMSwKICAgICAgICB0eXBlSWQ6IHRoaXMudHlwZUlkLAogICAgICAgIHByaWNlOiB0aGlzLnByaWNlLAogICAgICB9OwoKICAgICAgbGV0IGlkID0gLTE7CgogICAgICBhd2FpdCBheGlvcy5wb3N0KCIvYXBpL2FkIiwgZGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBpZCA9IHJlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgaWYgKHRoaXMuaW1hZ2VzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCJwdXNoIik7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJGVtaXQoImNsb3NlRGlhbG9nIik7CiAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgIHRpdGxlOiAiT2dsYXMgdXNwamXFoW5vIG9iamF2bGplbiEiLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJQb3R2cmRpIiwKICAgICAgICAgICAgdGltZXI6IDE1MDAsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybS5yZXNldCgpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgZXJyb3I7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuaW1hZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7CiAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoImZpbGVzIiwgZWxlbWVudCk7CiAgICAgICAgfSk7CgogICAgICAgIGF3YWl0IGF4aW9zCiAgICAgICAgICAucHV0KCIvYXBpL3VwbG9hZC9zYXZlLyIgKyBpZCwgZm9ybWRhdGEsIHsKICAgICAgICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiIH0sCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTVUNDRVNTISEiLCByZXNwb25zZSk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoInB1c2giKTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoImNsb3NlRGlhbG9nIik7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHRpdGxlOiAiT2dsYXMgdXNwamXFoW5vIG9iamF2bGplbiEiLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiUG90dnJkaSIsCiAgICAgICAgICAgICAgdGltZXI6IDE1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRyZWZzLmFkZEZvcm0ucmVzZXQoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGQUlMVVJFISEiLCBlcnJvcik7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["AddAd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddAd.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-row justify=\"center\" data-app>\n    <v-dialog v-model=\"dialog\" persistent max-width=\"650px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">Dodaj oglas</span>\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n            <v-form ref=\"addForm\" v-model=\"validAdd\" lazy-validation>\n              <v-row>\n                <v-col cols=\"12\" sm=\"12\" md=\"6\">\n                  <v-text-field\n                    label=\"Naziv*\"\n                    v-model=\"name\"\n                    required\n                    :rules=\"rules.required\"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\" md=\"6\">\n                  <v-text-field\n                    v-model=\"price\"\n                    label=\"Cijena*\"\n                    hint=\"Cijena izražena u eurima\"\n                    append-icon=\"mdi-currency-eur\"\n                    :rules=\"rules.price\"\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\" md=\"4\">\n                  <v-select\n                    :items=\"categories\"\n                    v-model=\"categoryId\"\n                    label=\"Kategorija*\"\n                    item-text=\"name\"\n                    item-value=\"id\"\n                    single-line\n                    solo\n                    :rules=\"rules.required\"\n                  ></v-select>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\" md=\"4\">\n                  <v-select\n                    :items=\"types\"\n                    v-model=\"typeId\"\n                    label=\"Tip oglasa*\"\n                    item-text=\"name\"\n                    item-value=\"id\"\n                    single-line\n                    solo\n                    :rules=\"rules.required\"\n                  ></v-select>\n                </v-col>\n                <v-col cols=\"12\" sm=\"12\" md=\"4\">\n                  <v-select\n                    :items=\"cities\"\n                    v-model=\"cityId\"\n                    label=\"Grad*\"\n                    item-text=\"name\"\n                    item-value=\"id\"\n                    single-line\n                    solo\n                    :rules=\"rules.required\"\n                  ></v-select>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-textarea\n                    solo\n                    v-model=\"description\"\n                    name=\"input-7-4\"\n                    label=\"Opis oglasa\"\n                    value=\"\"\n                    hint=\"Opis oglasa\"\n                    :rules=\"rules.required\"\n                  ></v-textarea>\n                </v-col>\n                <v-col cols=\"12\">\n                  <v-file-input\n                    v-model=\"images\"\n                    chips\n                    counter\n                    multiple\n                    show-size\n                    small-chips\n                    truncate-length=\"14\"\n                    @change=\"check()\"\n                  ></v-file-input>\n                </v-col>\n              </v-row>\n            </v-form>\n          </v-container>\n          <small>*označava obavezno polje</small>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"closeDialog\">\n            Zatvori\n          </v-btn>\n          <v-btn color=\"blue darken-1\" text @click=\"addAd\" :loading=\"loading\"> Sačuvaj </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nexport default {\n  props: {\n    dialog: null,\n    categories: null,\n    cities: null,\n    types: null,\n  },\n  name: \"AddAd\",\n  data() {\n    return {\n      loading: false,\n      images: [],\n      validAdd: \"\",\n      name: \"\",\n      description: \"\",\n      cityId: \"\",\n      typeId: \"\",\n      categoryId: \"\",\n      price: \"\",\n      rules: {\n        required: [(v) => !!v || \"Obavezno polje\"],\n        price: [\n          (v) => !!v || \"Obavezno polje\",\n          (v) => parseFloat(v) > 0 || \"Cijena mora biti pozitivan broj\",\n        ],\n      },\n    };\n  },\n  methods: {\n    closeDialog() {\n      this.$emit(\"closeDialog\");\n      this.$refs.addForm.reset();\n    },\n    check() {\n      console.log(\"DOORRRRR\", this.images);\n    },\n    async addAd() {\n      this.loading = true;\n      if (!this.$refs.addForm.validate()) {\n        this.loading = false;\n        return;\n      }\n\n      let data = {\n        name: this.name,\n        description: this.description,\n        categoryId: this.categoryId,\n        cityId: this.cityId,\n        ownerId: JSON.parse(localStorage.getItem(\"user\")).id,\n        statusId: 1,\n        typeId: this.typeId,\n        price: this.price,\n      };\n\n      let id = -1;\n\n      await axios.post(\"/api/ad\", data).then((response) => {\n        id = response.data.id;\n        if (this.images.length == 0) {\n          this.$emit(\"push\");\n          this.loading = false;\n          this.$emit(\"closeDialog\");\n          Swal.fire({\n            icon: \"success\",\n            title: \"Oglas uspješno objavljen!\",\n            showConfirmButton: true,\n            confirmButtonText: \"Potvrdi\",\n            timer: 1500,\n          });\n          this.$refs.addForm.reset();\n        }\n      }).catch((error) => {\n        error;\n        this.loading = false;\n      });\n\n      if (this.images.length > 0) {\n        let formdata = new FormData();\n        this.images.forEach((element) => {\n          formdata.append(\"files\", element);\n        });\n\n        await axios\n          .put(\"/api/upload/save/\" + id, formdata, {\n            headers: { \"Content-Type\": \"multipart/form-data\" },\n          })\n          .then((response) => {\n            console.log(\"SUCCESS!!\", response);\n            this.$emit(\"push\");\n            this.loading = false;\n            this.$emit(\"closeDialog\");\n            Swal.fire({\n              icon: \"success\",\n              title: \"Oglas uspješno objavljen!\",\n              showConfirmButton: true,\n              confirmButtonText: \"Potvrdi\",\n              timer: 1500,\n            });\n            this.$refs.addForm.reset();\n          })\n          .catch((error) => {\n            console.log(\"FAILURE!!\", error);\n            this.loading = false;\n          });\n      }\n    },\n  },\n};\n</script>"]}]}