{"remainingRequest":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/src/components/UserUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/src/components/UserUpdate.vue","mtime":1632660448718},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/borkosmolovic/Desktop/Jovan/sample/src/main/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXBkYXRlVXNlciIsCiAgcHJvcHM6IHsKICAgIHVzZXI6bnVsbCwKICAgIGRpYWxvZzogbnVsbCwKICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBsb2FkaW5nOiBmYWxzZSwKICAgIGlkOiAiIiwKICAgIGZpcnN0TmFtZTogIiIsCiAgICBsYXN0TmFtZTogIiIsCiAgICBlbWFpbDogIiIsCiAgICBwYXNzd29yZDogIiIsCiAgICBjb25maXJtUGFzc3dvcmQ6ICIiLAogICAgc2hvdzE6IGZhbHNlLAogICAgdmVyaWZ5OiAiIiwKICAgIHJlZ2lzdHJhdGlvbkxvYWRpbmc6IGZhbHNlLAogICAgdmFsaWQ6IHRydWUsCiAgICBlbWFpbFJ1bGVzOiBbCiAgICAgICh2KSA9PiAhIXYgfHwgIk9iYXZlem5vIHBvbGplIiwKICAgICAgKHYpID0+IC8uK0AuK1wuLisvLnRlc3QodikgfHwgIkUtbWFpbCBtb3JhIGJpdGkgdmFsaWRhbiIsCiAgICBdLAogICAgcnVsZXM6IHsKICAgICAgcmVxdWlyZWQ6ICh2YWx1ZSkgPT4gISF2YWx1ZSB8fCAiT2JhdmV6bm8gcG9samUiLAogICAgICBtaW46ICh2KSA9PiAoIXYgfHwgdi5sZW5ndGggPDEgIHx8IHYubGVuZ3RoID49IDgpIHx8ICJNaW5pbXVtIDgga2FyYWt0ZXJhIiwKICAgIH0sCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIHBhc3N3b3JkTWF0Y2goKSB7CiAgICAgIHJldHVybiAoKSA9PgogICAgICAgICAgIXRoaXMucGFzc3dvcmQgfHwgdGhpcy5wYXNzd29yZC5sZW5ndGg+PTEgfHwgdGhpcy5wYXNzd29yZCA9PT0gdGhpcy52ZXJpZnkgfHwgIsWgaWZyZSBzZSBtb3JhanUgcG9kdWRhcmF0aSI7IAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVVzZXIoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGxldCB1c2VyID0gdGhpcy51c2VyOwogICAgICBpZiAodGhpcy4kcmVmcy51cGRhdGVVc2VyRm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgIGlkOiB0aGlzLmlkLAogICAgICAgICAgZmlyc3ROYW1lOiB0aGlzLmZpcnN0TmFtZSwKICAgICAgICAgIGxhc3ROYW1lOiB0aGlzLmxhc3ROYW1lLAogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICAgIGFjdGl2ZTogdXNlci5hY3RpdmUsCiAgICAgICAgfTsKICAgICAgICBpZighZGF0YS5wYXNzd29yZCB8fCBkYXRhLnBhc3N3b3JkLmxlbmd0aCA8IDgpewogICAgICAgICBkYXRhLnBhc3N3b3JkID0gdXNlci5wYXNzd29yZDsKICAgICAgICB9CiAgICAgICAgYXhpb3MucHV0KCIvYXBpL3VzZXIvZWRpdC8iICsgdGhpcy5pZCwgZGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaWQpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgdGl0bGU6ICJVc3BqZcWhbmUgaXptamVuZSEiLAogICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiUG90dnJkaSIsCiAgICAgICAgICAgICAgdGltZXI6IDE1MDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRlbWl0KCJ1cGRhdGUiKTsKICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpOwogICAgICAgICAgICB0aGlzLmNsZWFyRm9ybSgpOwogICAgICAgICAgICB0aGlzLiRyZWZzLnVwZGF0ZVVzZXJGb3JtLnJlc2V0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckZvcm0oKSB7CiAgICAgIHRoaXMuZmlyc3ROYW1lID0gIiI7CiAgICAgIHRoaXMubGFzdE5hbWUgPSAiIjsKICAgICAgdGhpcy5lbWFpbCA9ICIiOwogICAgICB0aGlzLnBhc3N3b3JkID0gIiI7CiAgICAgIHRoaXMuY29uZmlybVBhc3N3b3JkID0gIiI7CiAgICB9LAogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlRGlhbG9nIik7CiAgICAgIHRoaXMuY2xlYXJGb3JtKCk7CiAgICAgIHRoaXMuJHJlZnMudXBkYXRlVXNlckZvcm0ucmVzZXQoKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgZGlhbG9nOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHZhbDsKICAgICAgbGV0IHVzZXIgPSB0aGlzLnVzZXI7CiAgICAgIGNvbnNvbGUubG9nKCJ1c2VyIiwgdXNlcik7CiAgICAgIHRoaXMuaWQgPSB1c2VyLmlkOwogICAgICB0aGlzLmZpcnN0TmFtZSA9IHVzZXIuZmlyc3ROYW1lOwogICAgICB0aGlzLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZTsKICAgICAgdGhpcy5lbWFpbCA9IHVzZXIuZW1haWw7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["UserUpdate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserUpdate.vue","sourceRoot":"src/components","sourcesContent":["\n\n\n<template>\n  <v-app>\n    <v-row justify=\"center\" data-app>\n      <v-dialog v-if=\"dialog\" v-model=\"dialog\" persistent max-width=\"650px\">\n        <v-card>\n          <v-card-title>\n            <span class=\"headline\">Izmijeni korisničke podatke</span>\n          </v-card-title>\n          <v-card-text>\n            <v-container>\n              <v-form ref=\"updateUserForm\" v-model=\"valid\" lazy-validation>\n                <v-row>\n                  <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                    <v-text-field\n                      v-model=\"firstName\"\n                      :rules=\"[rules.required]\"\n                      label=\"*Ime\"\n                      maxlength=\"20\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                    <v-text-field\n                      v-model=\"lastName\"\n                      :rules=\"[rules.required]\"\n                      label=\"*Prezime\"\n                      maxlength=\"20\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"email\"\n                      :rules=\"emailRules\"\n                      label=\"*E-mail\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"password\"\n                      :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\n                      :rules=\"[rules.min]\"\n                      :type=\"show1 ? 'text' : 'password'\"\n                      name=\"input-10-1\"\n                      label=\"*Nova šifra\"\n                      hint=\"At least 8 characters\"\n                      counter\n                      @click:append=\"show1 = !show1\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      block\n                      v-model=\"verify\"\n                      :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\n                      :rules=\"[passwordMatch]\"\n                      :type=\"show1 ? 'text' : 'password'\"\n                      name=\"input-10-1\"\n                      label=\"*Potvrdite novu šifru\"\n                      counter\n                      @click:append=\"show1 = !show1\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-spacer></v-spacer>\n                  <v-col class=\"d-flex ml-auto\" cols=\"12\" sm=\"3\" xsm=\"12\">\n                  </v-col>\n                </v-row>\n              </v-form>\n            </v-container>\n            <small>*označava obavezno polje</small>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" text @click=\"closeDialog\">\n              Zatvori\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click=\"updateUser\"\n              :loading=\"registrationLoading\"\n            >\n              Izmijeni</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </v-app>\n</template>\n\n<script>\nimport Swal from \"sweetalert2\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"UpdateUser\",\n  props: {\n    user:null,\n    dialog: null,\n  },\n  data: () => ({\n    loading: false,\n    id: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    show1: false,\n    verify: \"\",\n    registrationLoading: false,\n    valid: true,\n    emailRules: [\n      (v) => !!v || \"Obavezno polje\",\n      (v) => /.+@.+\\..+/.test(v) || \"E-mail mora biti validan\",\n    ],\n    rules: {\n      required: (value) => !!value || \"Obavezno polje\",\n      min: (v) => (!v || v.length <1  || v.length >= 8) || \"Minimum 8 karaktera\",\n    },\n  }),\n  computed: {\n    passwordMatch() {\n      return () =>\n          !this.password || this.password.length>=1 || this.password === this.verify || \"Šifre se moraju podudarati\"; \n    },\n  },\n  methods: {\n    updateUser() {\n      this.loading = true;\n      let user = this.user;\n      if (this.$refs.updateUserForm.validate()) {\n        const data = {\n          id: this.id,\n          firstName: this.firstName,\n          lastName: this.lastName,\n          email: this.email,\n          password: this.password,\n          active: user.active,\n        };\n        if(!data.password || data.password.length < 8){\n         data.password = user.password;\n        }\n        axios.put(\"/api/user/edit/\" + this.id, data).then((response) => {\n          this.loading = false;\n          if (response.data.id) {\n            localStorage.setItem(\"user\",JSON.stringify(response.data));\n            Swal.fire({\n              icon: \"success\",\n              title: \"Uspješne izmjene!\",\n              showConfirmButton: true,\n              confirmButtonText: \"Potvrdi\",\n              timer: 1500,\n            });\n            this.$emit(\"update\");\n            this.closeDialog();\n            this.clearForm();\n            this.$refs.updateUserForm.reset();\n          }\n        });\n      } else {\n        this.loading = false;\n      }\n    },\n    clearForm() {\n      this.firstName = \"\";\n      this.lastName = \"\";\n      this.email = \"\";\n      this.password = \"\";\n      this.confirmPassword = \"\";\n    },\n    closeDialog() {\n      this.$emit(\"closeDialog\");\n      this.clearForm();\n      this.$refs.updateUserForm.reset();\n    },\n  },\n  watch: {\n    dialog: function (val) {\n      val;\n      let user = this.user;\n      console.log(\"user\", user);\n      this.id = user.id;\n      this.firstName = user.firstName;\n      this.lastName = user.lastName;\n      this.email = user.email;\n    },\n  },\n};\n</script>"]}]}